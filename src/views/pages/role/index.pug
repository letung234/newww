extends ../../layouts/default.pug

block main
  if role.permission.includes("roles_view")
    .container.mx-auto.p-4
      h1(class="text-2xl font-semibold text-gray-700 mb-6") Nhóm Quyền
      h4 #{role.permission.roles_view}
      .bg-white.shadow-lg.rounded-lg.p-6.mb-6
        div(class="flex flex-col md:flex-row  gap-4 items-center mb-4")
          h2(class="text-xl font-semibold text-gray-700 mb-2 md:mb-0") Danh sách
          if role.permission.includes("roles_create")
            a(
              href=`/role/create`
              class="bg-green-500 hover:bg-green-600 text-white font-medium px-4 py-2 rounded-md transition duration-200"
            ) + Thêm mới
          if role.permission.includes("roles_permissions")
            a(
              href=`/role/permission`
              class="bg-green-500 hover:bg-green-600 text-white font-medium px-4 py-2 rounded-md transition duration-200"
            ) Phân Quyền

        table(class="min-w-full bg-white divide-y divide-gray-200 rounded-lg overflow-hidden shadow-lg")
          thead(class="bg-gray-50")
            tr
              th(class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase") STT
              th(class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase") Nhóm quyền
              th(class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase") Mô tả ngắn
              th(class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase") Hành Động

          tbody(class="bg-white divide-y divide-gray-200")
            if records.length > 0
              each item, index in records
                tr
                  td(class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900") #{index + 1}
                  td(class="px-6 py-4 whitespace-nowrap text-sm text-gray-700") #{item.title}
                  td(class="px-6 py-4 whitespace-pre-wrap text-sm text-gray-500") #{item.description}
                  td(class="px-6 py-4 whitespace-nowrap text-sm font-medium flex flex-wrap md:flex-nowrap space-x-2")
                    if role.permission.includes("roles_edit")
                      a(
                        href=`role/edit/${item._id}`
                        class="text-yellow-500 hover:text-yellow-600"
                      ) Sửa
                    if role.permission.includes("roles_delete")
                      button(
                        class="text-red-600 hover:text-red-800"
                        id='data-role-delete-data-id'
                        value=item._id
                      ) Xóa
            else
              tr
                td(colspan="4" class="px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500") Chưa có nhóm quyền nào được tạo.

  else 
    // Thông báo khi không có quyền truy cập
    .container.mx-auto.p-4
      .bg-red-100.border.border-red-400.text-red-700.p-4.rounded-md
        p(class="font-semibold") Bạn không đủ quyền truy cập.

block script
  script(type="module" src="/js/role.js")
